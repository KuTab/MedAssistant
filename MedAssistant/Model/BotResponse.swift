//
//  BotResponse.swift
//  MedAssistant
//
//  Created by Egor Dadugin on 11.01.2022.
//

import Foundation

let qAndAlist : [[String] : String] = [["что", "такое", "туберкулёз"] : "Туберкулёз - это инфекционное заболевание, вызываемое микобактериями туберкулеза, которые часто называют палочками Коха. Заболевание развивается только в ответ на размножение в организме человека этих микробов. Самой распространенной формой туберкулёза является туберкулёз лёгких.", ["как", "передаётся", "туберкулёз"] : "Туберкулез распространяется от человека человеку при контакте с больным туберкулезом:при кашле, чихании, соприкосновении с другим материалом, содержащим микобактерии.", ["каковы", "причины", "заболевания", "туберкулезом"] : "Главная причина - снижение защитных свойств иммунной системы, наличием хронических инфекций, хронических заболеваний органов дыхания (бронхиты, пневмонии и др.), сахарного диабета, язвенной болезни желудка, ВИЧ или СПИД, проживание в неудовлетворительных бытовых условиях, пыльные и непроветренные помещения, нарушение режима питания, отдыха, курение, алкоголизм, наркомания.", ["каковы", "симтпомы", "туберкулеза"] : "Заболевание часто начинается с незначительных жалоб. К ним относятся кашель (иногда с примесью крови), снижение веса, потеря аппетита, усталость, незначительное повышение температуры, ночная потливость, боль в груди.", ["что", "такое", "бактериовыделение"] : "Под бактериовыделением понимают наличие (МБТ+) либо отсутствие (МБТ-) выделений  в окружающую среду возбудителей туберкулеза.", ["как", "долго", "человек", "с", "туберкулезом", "остается", "заразным"] : "Человека с туберкулёзом лёгких изолируют в больнице или дома, то есть отделяют от окружающих. Он изолируется до тех пор, пока не будет исключена вероятность заражения окружающих (контрольное исследование мокроты). После этого больной больше не заразен.", ["может", "ли", "туберкулез", "пройти", "сам"] : "Нет, туберкулез не может пройти без лечения", ["сколько", "лечится", "туберкулез"] : "Больной должен полноценно пролечиться не менее 6-8 месяцев: в течение 2-3 месяцев в туберкулезном стационаре, затем в условиях дневного стационара и потом амбулаторно.", ["почему", "туберкулез", "долго", "лечится"] : "Лечение туберкулеза - длительный процесс, потому что микобактерия туберкулеза погибает очень медленно. В случае четкого соблюдения всех назначений врача лечение активной формы туберкулеза занимает в среднем год.", ["можно", "заболеть", "туберкулезом", "повторно"] : "Да. Заболеть туберкулезом повторно можно в двух случаях: при активации очагов воспаления либо при повторном заражении", ["как", "выявляется", "туберкулез"] : "Цифровая флюорография легких (или расширенная рентгенография); бактериологическое исследование мокроты (микроскопия препаратов патологического материала по методу Циля-Нильсена); туберкулиновые тесты.", ["как", "проходит", "лечение", "туберкулеза"] : "Основой лечения больных туберкулезом является в настоящее время лечение противотуберкулезными препаратами - лекарствами, губительно воздействующими на микобактерии, находящиеся в организме больного. На сегодня это единственная возможность справиться с туберкулезом.", ["может", "диаскинтест", "вызвать", "заболевание", "туберкулезом"] : "Диаскинтест или Манту не могут вызвать заболевания, поэтому они безопасны для человека.", ["излечим", "туберкулез"] : "Туберкулез излечим. Основа его лечения - антибактериальная химиотерапия противотуберкулезными препаратами.", ["как", "быстро", "развивается", "туберкулез"] : "Промежуток времени от момента заражения микобактериями туберкулеза до появления симптомов выявить достаточно сложно, длится он может от 3 месяцев до нескольких лет.", ["что", "такое", "химиотерапия", "при", "туберкулезе"] : "Противотуберкулезная терапия обязательно должна быть комбинированной (полихимиотерапия), т.е. одновременно в течение достаточно длительного времени применяют несколько противотуберкулезных препаратов.", ["как", "напсиать", "отказ", "от", "госпитализации"] : "Если пациент отказывается от лечения в стационаре, ему необходимо заполнить бланк отказа на имя главврача больницы с объяснением причин. В конце документа ставят личную подпись.", ["могут", "деражть", "в", "больнице", "без", "согласия"] : "Без согласия больного госпитализировать могут в нескольких случаях: если у пациента туберкулез в заразной стадии и форме, и он сознательно уклоняется от лечения и обследования, а также намеренно нарушает безопасный режим контактов; если гражданин имеет психическое расстройство, которое может привести к беспомощному состоянию, или к состоянию, которое может представлять опасность для окружающих.", ["что", "такое", "устойчивый туберкулез"] : "Устойчивый туберкулез предполагает приобретение бактериями \"иммунитета\" к изониазиду и рифампицину. Частой причиной является неправильный прием противотуберкулезных препаратов.", ["чем", "опасен", "устойчивый", "туберкулез"] : "Лечить больных с множественной устойчивостью микобактерий сложно и чрезвычайно дорого, длительность лечения может достигать нескольких лет и далеко не всегда оно оказывается успешным: можно потерять не только легкое (после оперативного вмешательства), но и жизнь. Поэтому, главное - соблюдение больными предписанных сроков и методов лечения и прием всех препаратов, которые прописал фтизиатр."]

func getBotResponse(message: String) -> String {
    let tempMessage = message.lowercased()
    
//    if tempMessage.contains("hello") {
//        return "Hey there!"
//    } else if tempMessage.contains("goodbye") {
//        return "Talk to you later!"
//    } else {
//        return "Default"
//    }
    
    let result =  qAndAlist.first(where: { $0.key.allSatisfy(tempMessage.contains) })?.value
    if let result = result {
        return result
    } else {
        return "К сожалению, я не могу ответить на данный вопрос."
    }
}
